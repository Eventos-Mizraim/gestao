<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legend√°rios - Gest√£o de Eventos</title>

    <!-- Bibliotecas Externas -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Cinzel:wght@700&display=swap" rel="stylesheet">

    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- SweetAlert2 para alertas bonitos -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root {
            --bg-dark: #0a0a0a;
            --bg-card: #141414;
            --accent-gold: #D4AF37;
            --accent-orange: #FF6600;
            --text-main: #e0e0e0;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        h1, h2, h3, .brand-font {
            font-family: 'Cinzel', serif;
            letter-spacing: 2px;
        }

        /* Utilit√°rios */
        .text-gold { color: var(--accent-gold) !important; }
        .text-orange { color: var(--accent-orange) !important; }
        .bg-gold { background-color: var(--accent-gold); color: #000; }
        .btn-orange { 
            background: linear-gradient(45deg, #FF6600, #ff8c00); 
            color: white; border: none; font-weight: bold; 
            text-transform: uppercase; letter-spacing: 1px;
        }
        .btn-orange:hover { background: #e65c00; color: white; box-shadow: 0 0 15px rgba(255, 102, 0, 0.4); }

        /* Card Estilizado */
        .l-card {
            background-color: var(--bg-card);
            border: 1px solid #333;
            border-left: 4px solid var(--accent-gold);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.2s;
        }
        .l-card:hover { transform: translateY(-2px); border-color: var(--accent-orange); }

        /* Inputs */
        .form-control, .form-select {
            background-color: #222;
            border: 1px solid #444;
            color: white;
        }
        .form-control:focus, .form-select:focus {
            background-color: #222;
            color: white;
            border-color: var(--accent-gold);
            box-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
        }

        /* Navbar */
        .l-navbar {
            background-color: rgba(0,0,0,0.9);
            border-bottom: 2px solid var(--accent-gold);
            padding: 15px 0;
        }

        /* Imagens da Loja */
        .product-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            border: 1px solid #444;
            margin-bottom: 10px;
        }

        /* Modal Customizado */
        .modal-content {
            background-color: #1a1a1a;
            border: 1px solid var(--accent-gold);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- DADOS MOCKADOS ---
        const AVISOS_INICIAIS = [
            { id: 1, title: 'BEM-VINDOS GUERREIROS', date: 'HOJE', desc: 'Gratid√£o aos 26 homens que aceitaram o chamado. A jornada apenas come√ßou.', important: true },
            { id: 2, title: 'Reuni√£o de Alinhamento', date: 'Sexta, 20h', desc: 'Todos os coordenadores devem estar presentes.', important: false },
            { id: 3, title: 'Prazo Uniformes', date: 'At√© Domingo', desc: 'O pedido do kit deve ser feito via sistema.', important: true }
        ];

        const SETORES = [
            { nome: 'Eventos', icon: 'groups', desc: 'Coordena as tribos, organiza os grupos e acompanha as fam√≠lias.' },
            { nome: 'Seguran√ßa', icon: 'security', desc: 'Integridade f√≠sica, monitoramento de trilhas e preven√ß√£o de riscos.' },
            { nome: 'Log√≠stica', icon: 'local_shipping', desc: 'Base de opera√ß√µes: cozinha, insumos, transporte e estrutura.' },
            { nome: 'M√≠dia', icon: 'photo_camera', desc: 'Capta√ß√£o de imagens, v√≠deo e divulga√ß√£o oficial.' },
            { nome: 'Comunica√ß√£o', icon: 'cell_tower', desc: 'R√°dios, antenas e fluxo de informa√ß√µes entre equipes.' },
            { nome: 'Hakuna (Sa√∫de)', icon: 'medical_services', desc: 'M√©dicos e primeiros socorros.' },
            { nome: 'ADM', icon: 'assignment', desc: 'Inscri√ß√µes, cronogramas e documenta√ß√£o.' },
            { nome: 'Intercess√£o', icon: 'volunteer_activism', desc: 'Cobertura espiritual e ora√ß√£o.' }
        ];

        // --- COMPONENTES ---

        // 1. HEADER
        const Header = ({ setView }) => (
            <nav className="l-navbar sticky-top">
                <div className="container d-flex justify-content-between align-items-center">
                    <div className="d-flex align-items-center gap-3" onClick={() => setView('home')} style={{cursor: 'pointer'}}>
                        <img src="https://eventos-mizraim.github.io/gestao/Eventos.png" height="50" alt="Logo Depto" />
                        <div className="d-none d-md-block">
                            <h4 className="m-0 brand-font text-gold">LEGEND√ÅRIOS</h4>
                            <small className="text-white opacity-50">MIZRAIM - LIMITE DUPLO</small>
                        </div>
                    </div>
                    <div className="d-flex gap-2">
                        <button className="btn btn-sm btn-outline-light" onClick={() => setView('cadastro')}>FICHA</button>
                        <button className="btn btn-sm btn-outline-warning" onClick={() => setView('loja')}>LOJA</button>
                        <button className="btn btn-sm btn-dark text-gold border-gold" onClick={() => setView('admin_login')}>COORD</button>
                    </div>
                </div>
            </nav>
        );

        // 2. DASHBOARD / HOME
        const Home = () => (
            <div className="container py-5">
                <div className="text-center mb-5 animate__animated animate__fadeIn">
                    <img src="https://eventos-mizraim.github.io/gestao/MIZRAIM_LIMITE%20DUPLO.png" className="img-fluid mb-3" style={{maxHeight: '150px'}} />
                    <h1 className="text-gold display-4 fw-bold">MISS√ÉO CUMPRIDA</h1>
                    <p className="lead text-white">26 Homens. Uma nova hist√≥ria.</p>
                    <div className="alert alert-dark border-gold d-inline-block mt-3">
                        <i className="material-icons align-middle text-gold me-2">star</i>
                        "O ferro afia o ferro, e um homem afia o outro."
                    </div>
                </div>

                <div className="row g-4">
                    <div className="col-md-8 offset-md-2">
                        <h4 className="text-orange mb-3 brand-font"><i className="material-icons align-middle">campaign</i> COMUNICADOS DO P√öLPITO</h4>
                        {AVISOS_INICIAIS.map(aviso => (
                            <div key={aviso.id} className="l-card">
                                <div className="d-flex justify-content-between align-items-start">
                                    <h5 className={aviso.important ? "text-gold fw-bold" : "text-white"}>{aviso.title}</h5>
                                    <span className="badge bg-secondary">{aviso.date}</span>
                                </div>
                                <p className="text-muted m-0 mt-2">{aviso.desc}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        // 3. FICHA DE CADASTRO
        const FichaCadastro = () => {
            const [cep, setCep] = useState('');
            const [endereco, setEndereco] = useState('Aguardando CEP...');
            const [jaServiu, setJaServiu] = useState('nao');
            const [fezCurso, setFezCurso] = useState('nao');

            const buscarCep = async (e) => {
                const valor = e.target.value;
                setCep(valor);
                if (valor.length === 8) {
                    try {
                        setEndereco("Buscando...");
                        const response = await fetch(`https://viacep.com.br/ws/${valor}/json/`);
                        const data = await response.json();
                        if (!data.erro) {
                            setEndereco(`${data.logradouro}, ${data.bairro}, ${data.localidade}-${data.uf}`);
                        } else {
                            setEndereco("CEP n√£o encontrado.");
                        }
                    } catch (error) {
                        setEndereco("Erro na busca.");
                    }
                }
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                // Aqui entraria a l√≥gica de envio para API Google Sheets
                Swal.fire({
                    title: 'Dados Recebidos!',
                    text: 'Seu cadastro foi enviado para a secretaria.',
                    icon: 'success',
                    background: '#121212',
                    color: '#fff',
                    confirmButtonColor: '#D4AF37'
                });
            };

            return (
                <div className="container py-4">
                    <h2 className="text-gold text-center mb-4">FICHA DE COMBATE</h2>
                    <form onSubmit={handleSubmit} className="col-md-8 mx-auto l-card">
                        
                        <div className="mb-3">
                            <label className="form-label text-orange">N¬∫ Legend√°rio</label>
                            <input type="number" className="form-control" placeholder="Ex: 104" required />
                        </div>

                        <div className="mb-3">
                            <label className="form-label">Nome Completo</label>
                            <input type="text" className="form-control" required />
                        </div>

                        <div className="row">
                            <div className="col-md-4 mb-3">
                                <label className="form-label">CEP (Somente N√∫meros)</label>
                                <input type="text" className="form-control" maxLength="8" value={cep} onChange={buscarCep} placeholder="00000000" required />
                            </div>
                            <div className="col-md-8 mb-3">
                                <label className="form-label">Regi√£o/Endere√ßo</label>
                                <input type="text" className="form-control" value={endereco} disabled />
                            </div>
                        </div>

                        <hr className="border-secondary" />

                        <div className="mb-3">
                            <label className="form-label">J√° serviu em algum evento?</label>
                            <select className="form-select" value={jaServiu} onChange={(e) => setJaServiu(e.target.value)}>
                                <option value="nao">N√£o, primeira vez</option>
                                <option value="sim">Sim, j√° servi</option>
                            </select>
                        </div>

                        {jaServiu === 'sim' && (
                            <div className="mb-3 animate__animated animate__fadeIn">
                                <label className="form-label text-gold">Em qual √°rea serviu?</label>
                                <select className="form-select">
                                    <option>Eventos</option>
                                    <option>Cozinha</option>
                                    <option>Seguran√ßa</option>
                                    <option>M√≠dia</option>
                                    <option>Outros</option>
                                </select>
                            </div>
                        )}

                        <div className="mb-3">
                            <label className="form-label">J√° concluiu o Curso N1?</label>
                            <select className="form-select" value={fezCurso} onChange={(e) => setFezCurso(e.target.value)}>
                                <option value="nao">N√£o</option>
                                <option value="sim">Sim</option>
                            </select>
                        </div>

                        {fezCurso === 'sim' ? (
                            <div className="mb-3">
                                <label className="form-label text-gold">Anexar Certificado (Link Drive ou Foto)</label>
                                <input type="file" className="form-control" />
                                <small className="text-muted">Formatos: JPG, PDF</small>
                            </div>
                        ) : (
                            <div className="alert alert-warning border-gold bg-transparent text-white">
                                <i className="material-icons align-middle me-2">warning</i>
                                <strong>Aten√ß√£o:</strong> O curso √© obrigat√≥rio. 
                                <a href="#" className="text-orange fw-bold ms-2">CLIQUE AQUI PARA INICIAR</a>
                            </div>
                        )}

                        <button type="submit" className="btn btn-orange w-100 mt-3 py-3">ENVIAR FICHA</button>
                    </form>
                </div>
            );
        };

        // 4. LOJA / UNIFORMES
        const Loja = () => {
            const [balaclava, setBalaclava] = useState(1);
            const [tamanhoCamisa, setTamanhoCamisa] = useState('G');
            const [tamanhoCalca, setTamanhoCalca] = useState('42');

            const handleBalaclava = (e) => {
                const val = parseInt(e.target.value);
                if (val < 1) {
                    Swal.fire({ icon: 'error', title: 'Item Obrigat√≥rio', text: 'A Balaclava √© item de seguran√ßa essencial.', background: '#222', color: '#fff' });
                    setBalaclava(1);
                } else {
                    setBalaclava(val);
                }
            }

            return (
                <div className="container py-4">
                    <h2 className="text-gold text-center mb-4 brand-font">ARSENAL & FARDAMENTO</h2>
                    
                    <div className="row">
                        {/* KIT COMPLETO */}
                        <div className="col-md-6 mb-4">
                            <div className="l-card h-100">
                                <span className="badge bg-gold position-absolute m-2 text-black fw-bold">MAIS VENDIDO</span>
                                <div className="text-center p-3">
                                    <img src="https://eventos-mizraim.github.io/gestao/2pele.jpeg" className="product-img" />
                                </div>
                                <h4 className="text-white">Kit T√°tico Completo</h4>
                                <p className="text-muted">Inclui: 2¬™ Pele T√©rmica + Cal√ßa T√°tica + Balaclava + Patch</p>
                                <hr className="border-secondary"/>
                                
                                <label className="form-label text-orange">Tamanho Kit (Pele + Cal√ßa)</label>
                                <div className="d-flex gap-2 mb-3">
                                    <select className="form-select" value={tamanhoCamisa} onChange={(e) => setTamanhoCamisa(e.target.value)}>
                                        <option>P</option><option>M</option><option>G</option><option>GG</option><option>G1</option><option>G2</option>
                                    </select>
                                    <select className="form-select" value={tamanhoCalca} onChange={(e) => setTamanhoCalca(e.target.value)}>
                                        <option>38</option><option>40</option><option>42</option><option>44</option><option>46</option><option>48</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        {/* ITENS INDIVIDUAIS */}
                        <div className="col-md-6 mb-4">
                            <div className="l-card h-100">
                                <h4 className="text-gold"><i className="material-icons align-middle">shield</i> Itens Essenciais</h4>
                                
                                <div className="d-flex align-items-center gap-3 mt-4 mb-3">
                                    <img src="https://eventos-mizraim.github.io/gestao/balaclava.jpeg" style={{width: '60px', height:'60px', objectFit:'cover', borderRadius:'50%'}} />
                                    <div className="flex-grow-1">
                                        <h6 className="m-0 text-white">Balaclava T√°tica</h6>
                                        <small className="text-danger fw-bold">*Obrigat√≥rio m√≠nimo 01</small>
                                    </div>
                                    <input type="number" className="form-control" style={{width: '80px'}} value={balaclava} onChange={handleBalaclava} min="1" />
                                </div>

                                <div className="d-flex align-items-center gap-3 mb-3">
                                    <img src="https://eventos-mizraim.github.io/gestao/calca.jpeg" style={{width: '60px', height:'60px', objectFit:'cover', borderRadius:'50%'}} />
                                    <div className="flex-grow-1">
                                        <h6 className="m-0 text-white">Cal√ßa Ripstop</h6>
                                        <small className="text-muted">Avulso</small>
                                    </div>
                                    <select className="form-select" style={{width: '90px'}}>
                                        <option>38</option><option>40</option><option>42</option><option>44</option><option>46</option>
                                    </select>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div className="text-center mt-3">
                        <button className="btn btn-orange btn-lg px-5">FINALIZAR PEDIDO</button>
                    </div>
                </div>
            );
        };

        // 5. ADMIN AREA (COORDENA√á√ÉO)
        const AdminPanel = ({ onLogout }) => {
            return (
                <div className="container py-4">
                    <div className="d-flex justify-content-between align-items-center mb-4">
                        <h2 className="text-gold brand-font m-0">CENTRAL DE COMANDO</h2>
                        <button className="btn btn-outline-danger btn-sm" onClick={onLogout}>SAIR</button>
                    </div>

                    <div className="row g-4">
                        {SETORES.map((setor, idx) => (
                            <div key={idx} className="col-md-6 col-lg-3">
                                <div className="l-card h-100 text-center">
                                    <div className="mb-3 text-orange">
                                        <i className="material-icons" style={{fontSize: '3rem'}}>{setor.icon}</i>
                                    </div>
                                    <h4 className="text-white fw-bold">{setor.nome}</h4>
                                    <p className="text-muted small">{setor.desc}</p>
                                    <button className="btn btn-sm btn-outline-light w-100 mt-2">ACESSAR PAINEL</button>
                                </div>
                            </div>
                        ))}
                    </div>

                    <div className="mt-5 p-4 bg-dark border border-secondary rounded">
                        <h5 className="text-white mb-3">üìä Resumo Operacional</h5>
                        <div className="progress mb-3" style={{height: '25px', background: '#333'}}>
                            <div className="progress-bar bg-gold text-dark fw-bold" role="progressbar" style={{width: '100%'}}>26 Inscritos (100%)</div>
                        </div>
                         <div className="progress" style={{height: '25px', background: '#333'}}>
                            <div className="progress-bar bg-orange text-white fw-bold" role="progressbar" style={{width: '45%'}}>12 Kits Pagos</div>
                        </div>
                    </div>
                </div>
            );
        };

        // LOGIN MODAL (Simples)
        const Login = ({ onSuccess, onCancel }) => {
            const [user, setUser] = useState('');
            const [pass, setPass] = useState('');

            const handleLogin = (e) => {
                e.preventDefault();
                // L√≥gica simples pedida: Eventos / 1234
                if(pass === '1234') {
                    onSuccess();
                } else {
                    Swal.fire({icon: 'error', title: 'Acesso Negado', text: 'Senha incorreta', background: '#222', color: '#fff'});
                }
            }

            return (
                <div className="position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" style={{background: 'rgba(0,0,0,0.9)', zIndex: 1000}}>
                    <div className="l-card p-4" style={{width: '350px'}}>
                        <h3 className="text-gold text-center mb-3">√ÅREA RESTRITA</h3>
                        <form onSubmit={handleLogin}>
                            <div className="mb-3">
                                <label className="text-white small">√ÅREA/LOGIN</label>
                                <input type="text" className="form-control text-uppercase" placeholder="EX: EVENTOS" value={user} onChange={e => setUser(e.target.value)} required />
                            </div>
                            <div className="mb-3">
                                <label className="text-white small">SENHA</label>
                                <input type="password" className="form-control" placeholder="****" value={pass} onChange={e => setPass(e.target.value)} required />
                            </div>
                            <button className="btn btn-orange w-100 mb-2">ENTRAR</button>
                            <button type="button" className="btn btn-outline-secondary w-100" onClick={onCancel}>CANCELAR</button>
                        </form>
                    </div>
                </div>
            );
        };

        // --- APP PRINCIPAL ---
        const App = () => {
            const [view, setView] = useState('home'); // home, cadastro, loja, admin, admin_login
            const [isLoggedIn, setIsLoggedIn] = useState(false);

            const renderView = () => {
                switch(view) {
                    case 'home': return <Home />;
                    case 'cadastro': return <FichaCadastro />;
                    case 'loja': return <Loja />;
                    case 'admin': return <AdminPanel onLogout={() => { setIsLoggedIn(false); setView('home'); }} />;
                    case 'admin_login': 
                        return <Login onSuccess={() => { setIsLoggedIn(true); setView('admin'); }} onCancel={() => setView('home')} />;
                    default: return <Home />;
                }
            };

            return (
                <div className="d-flex flex-column min-vh-100">
                    <Header setView={setView} />
                    <main className="flex-grow-1">
                        {renderView()}
                    </main>
                    <footer className="text-center py-4 border-top border-secondary text-muted small">
                        <p className="m-0">¬© 2025 LEGEND√ÅRIOS - MIZRAIM | LIMITE DUPLO...</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
